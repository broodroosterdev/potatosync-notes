<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `rocket_okapi` crate."><meta name="keywords" content="rust, rustlang, rust-lang, rocket_okapi"><title>rocket_okapi - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../dark.css"><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../rocket_okapi/index.html'><div class='logo-container'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Crate rocket_okapi</p><div class="sidebar-elems"><a id='all-types' href='all.html'><p>See all rocket_okapi's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'rocket_okapi', ty: 'mod', relpath: '../'};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/rocket_okapi/lib.rs.html#1-95' title='goto source code'>[src]</a></span><span class='in-band'>Crate <a class="mod" href=''>rocket_okapi</a></span></h1><div class='docblock'><p>This projects serves to enable automatic rendering of <code>openapi.json</code> files, and provides
facilities to also serve the documentation alonside your api.</p>
<h1 id="usage" class="section-header"><a href="#usage">Usage</a></h1>
<p>First, add the following lines to your <code>Cargo.toml</code></p>
<pre><code class="language-toml">[dependencies]
rocket_okapi = &quot;0.3&quot;
schemars = &quot;0.6&quot;
okapi = { version = &quot;0.3&quot;, features = [&quot;derive_json_schema&quot;] }
</code></pre>
<p>To add documentation to a set of endpoints, a couple of steps are required. The request and
response types of the endpoint must implement <code>JsonSchema</code>. Secondly, the function must be
marked with <code>#[openapi]</code>. After that, you can simply replace <code>routes!</code> with
<code>routes_with_openapi!</code>. This will append an additional route to the resulting <code>Vec&lt;Route&gt;</code>,
which contains the <code>openapi.json</code> file that is required by swagger. Now that we have the json
file that we need, we can serve the swagger web interface at another endpoint, and we should be
able to load the example in the browser!</p>
<h3 id="example" class="section-header"><a href="#example">Example</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="attribute">#![<span class="ident">feature</span>(<span class="ident">decl_macro</span>, <span class="ident">proc_macro_hygiene</span>)]</span>
 
<span class="kw">use</span> <span class="ident">rocket</span>::<span class="ident">get</span>;
<span class="kw">use</span> <span class="ident">rocket_contrib</span>::<span class="ident">json</span>::<span class="ident">Json</span>;
<span class="kw">use</span> <span class="ident">rocket_okapi</span>::{<span class="ident">openapi</span>, <span class="ident">routes_with_openapi</span>, <span class="ident">JsonSchema</span>};
<span class="kw">use</span> <span class="ident">rocket_okapi</span>::<span class="ident">swagger_ui</span>::{<span class="ident">make_swagger_ui</span>, <span class="ident">SwaggerUIConfig</span>};
 
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">serde</span>::<span class="ident">Serialize</span>, <span class="ident">JsonSchema</span>)]</span>
<span class="kw">struct</span> <span class="ident">Response</span> {
    <span class="ident">reply</span>: <span class="ident">String</span>,
}
 
<span class="attribute">#[<span class="ident">openapi</span>]</span>
<span class="attribute">#[<span class="ident">get</span>(<span class="string">&quot;/&quot;</span>)]</span>
<span class="kw">fn</span> <span class="ident">my_controller</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Json</span><span class="op">&lt;</span><span class="ident">Response</span><span class="op">&gt;</span> {
    <span class="ident">Json</span>(<span class="ident">Response</span> {
        <span class="ident">reply</span>: <span class="string">&quot;show me the docs!&quot;</span>.<span class="ident">to_string</span>(),
    })
}

<span class="kw">fn</span> <span class="ident">get_docs</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="ident">SwaggerUIConfig</span> {
    <span class="kw">use</span> <span class="ident">rocket_okapi</span>::<span class="ident">swagger_ui</span>::<span class="ident">UrlObject</span>;
 
    <span class="ident">SwaggerUIConfig</span> {
        <span class="ident">url</span>: <span class="prelude-val">Some</span>(<span class="string">&quot;/my_resource/openapi.json&quot;</span>.<span class="ident">to_string</span>()),
        <span class="ident">urls</span>: <span class="prelude-val">Some</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="ident">UrlObject</span>::<span class="ident">new</span>(<span class="string">&quot;My Resource&quot;</span>, <span class="string">&quot;/v1/company/openapi.json&quot;</span>)]),
    }
}
 
<span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="ident">rocket</span>::<span class="ident">ignite</span>()
        .<span class="ident">mount</span>(<span class="string">&quot;/my_resource&quot;</span>, <span class="macro">routes_with_openapi</span><span class="macro">!</span>[<span class="ident">my_controller</span>])
        .<span class="ident">mount</span>(<span class="string">&quot;/swagger&quot;</span>, <span class="ident">make_swagger_ui</span>(<span class="kw-2">&amp;</span><span class="ident">get_docs</span>()))
        .<span class="ident">launch</span>();
}</pre></div>
</div><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table><tr class='module-item'><td><a class="mod" href="gen/index.html" title='rocket_okapi::gen mod'>gen</a></td><td class='docblock-short'><p>Contains the <code>Generator</code> struct, which you can use to manually control the way a struct is 
represented in the documentation.</p>
</td></tr><tr class='module-item'><td><a class="mod" href="handlers/index.html" title='rocket_okapi::handlers mod'>handlers</a></td><td class='docblock-short'><p>Contains several <code>Rocket</code> <code>Handler</code>s, which are used for serving the json files and the swagger
interface.</p>
</td></tr><tr class='module-item'><td><a class="mod" href="request/index.html" title='rocket_okapi::request mod'>request</a></td><td class='docblock-short'><p>This module contains several traits that correspond to the <code>Rocket</code> traits pertaining to request
guards and responses</p>
</td></tr><tr class='module-item'><td><a class="mod" href="response/index.html" title='rocket_okapi::response mod'>response</a></td><td class='docblock-short'><p>Contains the trait <code>OpenApiResponder</code>, meaning that a response implementing this trait can be
documented.</p>
</td></tr><tr class='module-item'><td><a class="mod" href="settings/index.html" title='rocket_okapi::settings mod'>settings</a></td><td class='docblock-short'><p>Contains then <code>OpenApiSettings</code> struct, which can be used to customise the behaviour of a
<code>Generator</code>.</p>
</td></tr><tr class='module-item'><td><a class="mod" href="swagger_ui/index.html" title='rocket_okapi::swagger_ui mod'>swagger_ui</a></td><td class='docblock-short'><p>Contains the functions and structs required to display the swagger web ui.</p>
</td></tr><tr class='module-item'><td><a class="mod" href="util/index.html" title='rocket_okapi::util mod'>util</a></td><td class='docblock-short'><p>Assorted function that are used throughout the application.</p>
</td></tr></table><h2 id='macros' class='section-header'><a href="#macros">Macros</a></h2>
<table><tr class='module-item'><td><a class="macro" href="macro.routes_with_openapi.html" title='rocket_okapi::routes_with_openapi macro'>routes_with_openapi</a></td><td class='docblock-short'><p>A replacement macro for <code>rocket::routes</code>. The key differences are that this macro will add an
additional element to the resulting <code>Vec&lt;rocket::Route&gt;</code>, which serves a static file called
<code>openapi.json</code>. This file can then be used to display the routes in the swagger ui.</p>
</td></tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.OpenApiError.html" title='rocket_okapi::OpenApiError struct'>OpenApiError</a></td><td class='docblock-short'><p>The error type returned by <code>rocket_okapi</code> when something fails.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.OperationInfo.html" title='rocket_okapi::OperationInfo struct'>OperationInfo</a></td><td class='docblock-short'><p>Contains information about an endpoint.</p>
</td></tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table><tr class='module-item'><td><a class="trait" href="trait.JsonSchema.html" title='rocket_okapi::JsonSchema trait'>JsonSchema</a></td><td class='docblock-short'><p>A type which can be described as a JSON Schema document.</p>
</td></tr></table><h2 id='types' class='section-header'><a href="#types">Type Definitions</a></h2>
<table><tr class='module-item'><td><a class="type" href="type.Result.html" title='rocket_okapi::Result type'>Result</a></td><td class='docblock-short'><p>Type alias for <code>Result&lt;T, OpenApiError&gt;</code>.</p>
</td></tr></table><h2 id='attributes' class='section-header'><a href="#attributes">Attribute Macros</a></h2>
<table><tr class='module-item'><td><a class="attr" href="attr.openapi.html" title='rocket_okapi::openapi attr'>openapi</a></td><td class='docblock-short'><p>A proc macro to be used in tandem with one of <code>Rocket</code>'s endpoint macros. It requires that all
of the arguments of the route implement one of the traits in <code>rocket_okapi::request</code>, and that
the return type implements <code>OpenApiResponder</code>.</p>
</td></tr></table><h2 id='derives' class='section-header'><a href="#derives">Derive Macros</a></h2>
<table><tr class='module-item'><td><a class="derive" href="derive.JsonSchema.html" title='rocket_okapi::JsonSchema derive'>JsonSchema</a></td><td class='docblock-short'></td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "rocket_okapi";</script><script src="../aliases.js"></script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>